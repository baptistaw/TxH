# ==============================================================================
# VARIABLES DE ENTORNO - Backend Sistema Registro TxH
# ==============================================================================
#
# INSTRUCCIONES:
# 1. Copiar este archivo a .env en la misma carpeta:
#    En Windows: copy .env.example .env
#    En Linux/Mac: cp .env.example .env
#
# 2. Reemplazar los valores de ejemplo con tus credenciales reales
#
# 3. NUNCA commitear el archivo .env al repositorio (ya está en .gitignore)
#
# ==============================================================================

# ------------------------------------------------------------------------------
# BASE DE DATOS POSTGRESQL
# ------------------------------------------------------------------------------

# URL de conexión a PostgreSQL
# Formato: postgresql://USUARIO:PASSWORD@HOST:PUERTO/NOMBRE_DB?schema=public

# Opción 1: PostgreSQL local (desarrollo)
DATABASE_URL="postgresql://postgres:postgres@localhost:5432/txh_registro?schema=public"

# Opción 2: PostgreSQL en Railway.app (recomendado para staging/producción)
# DATABASE_URL="postgresql://postgres:PASSWORD@containers-us-west-XXX.railway.app:PUERTO/railway"

# Opción 3: Neon.tech (PostgreSQL serverless)
# DATABASE_URL="postgresql://USER:PASSWORD@ep-XXX.us-east-2.aws.neon.tech/neondb?sslmode=require"

# Opción 4: Azure Database for PostgreSQL
# DATABASE_URL="postgresql://USER@SERVIDOR:PASSWORD@SERVIDOR.postgres.database.azure.com:5432/txh_registro?sslmode=require"

# ------------------------------------------------------------------------------
# SERVIDOR
# ------------------------------------------------------------------------------

# Puerto en el que corre el servidor Express
PORT=4000

# Entorno: development, staging, production
NODE_ENV=development

# ------------------------------------------------------------------------------
# SEGURIDAD
# ------------------------------------------------------------------------------

# Secreto para firmar JWT (generar con: node -e "console.log(require('crypto').randomBytes(64).toString('hex'))")
JWT_SECRET=REEMPLAZAR_CON_UN_STRING_ALEATORIO_LARGO_Y_SEGURO

# Tiempo de expiración del token JWT
JWT_EXPIRES_IN=7d

# Clave de cifrado para CI y datos sensibles (AES-256)
ENCRYPTION_KEY=REEMPLAZAR_CON_OTRA_CLAVE_ALEATORIA_DE_32_BYTES

# ------------------------------------------------------------------------------
# CORS (orígenes permitidos)
# ------------------------------------------------------------------------------

# Frontend en desarrollo
CORS_ORIGIN=http://localhost:3000

# En producción, cambiar a:
# CORS_ORIGIN=https://tu-dominio.com

# ------------------------------------------------------------------------------
# ALMACENAMIENTO DE ARCHIVOS (S3 compatible)
# ------------------------------------------------------------------------------

# AWS S3 o compatible (MinIO, Backblaze B2, Wasabi, etc.)
# Dejar en blanco si no se usará almacenamiento de archivos en MVP

S3_ENDPOINT=
S3_REGION=us-east-1
S3_BUCKET=txh-attachments
S3_ACCESS_KEY_ID=
S3_SECRET_ACCESS_KEY=

# ------------------------------------------------------------------------------
# LOGS Y MONITOREO
# ------------------------------------------------------------------------------

# Sentry DSN para tracking de errores (opcional)
SENTRY_DSN=

# Nivel de log: error, warn, info, debug
LOG_LEVEL=info

# ------------------------------------------------------------------------------
# EMAIL (opcional, para notificaciones)
# ------------------------------------------------------------------------------

# SMTP para envío de emails (ej: Gmail, SendGrid, Mailgun)
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=
SMTP_PASSWORD=
SMTP_FROM=noreply@txh-registro.uy

# ------------------------------------------------------------------------------
# RATE LIMITING (seguridad)
# ------------------------------------------------------------------------------

# Máximo de requests por IP por ventana de tiempo
RATE_LIMIT_MAX=100
RATE_LIMIT_WINDOW_MS=900000  # 15 minutos

# ------------------------------------------------------------------------------
# ETL (EXTRACCIÓN, TRANSFORMACIÓN Y CARGA)
# ------------------------------------------------------------------------------

# Schedule de ETL incremental en formato cron
# Ejemplos:
#   0 */6 * * *   → Cada 6 horas (00:00, 06:00, 12:00, 18:00)
#   0 */12 * * *  → Cada 12 horas (00:00, 12:00)
#   0 2 * * *     → Diariamente a las 2:00 AM
#   */30 * * * *  → Cada 30 minutos
ETL_CRON_SCHEDULE=0 */12 * * *

# Ejecutar ETL al iniciar el scheduler (true/false)
ETL_RUN_ON_START=false

# ------------------------------------------------------------------------------
# MISCELÁNEOS
# ------------------------------------------------------------------------------

# Zona horaria del sistema (para logs y timestamps)
TZ=America/Montevideo
